<!DOCTYPE html>
<html lang="ko">
    <meta charset="UTF-8">
<head>
    <title>점심 메뉴 추천 상세페이지</title>

    <style>
            * { box-sizing: border-box; }
            body { font-family: 'Helvetica Neue', Arial, sans-serif; 
            margin: 0; background:#fafafa; color:#222; 
        }

            .container { max-width:900px; margin:40px auto; padding:24px; 
                background:#fff; border-radius:16px; 
                box-shadow:0 10px 24px rgba(0,0,0,.06); text-align: center;}

      
            /* 표 스타일 */
            table { width:100%; border-collapse: collapse; table-layout: fixed; }
            thead th {
                background:#f5f6fa; border:1px solid #e5e7eb; padding:12px 10px;
                text-align:center; font-weight:600;
            }
            tbody td {
                border:1px solid #e5e7eb; padding:12px 10px; vertical-align: middle;
                text-align: center;
            }

            /* 칼럼 정렬 */
            td.col-name   { text-align: left;  }
            td.col-budget { text-align: right; }
            td.col-center { text-align: center; }

            /* 지그재그 가독성 - 표 테마와 유사한 기능 끌어옴 */
            tbody tr:nth-child(odd)  { background:#fafbff; }
            tbody tr:nth-child(even) { background:#fff; }

            button { padding: 12px 18px; border:0; border-radius:10px; cursor:pointer; 
            align-items: center;}
            
            #button-submit {
                color: rgb(255, 255, 255);
                background-color: rgba(74, 61, 255, 0.98);
                margin-top: 10px;
                margin-right: 5px;
            }

            #button-list {
                color: rgb(255, 255, 255);
                background-color: rgba(0, 0, 0, 0.98);
                margin-top: 10px;
                margin-right: 5px;

            }
            #button-home {
                color: rgb(255, 255, 255);
                background-color: rgb(255, 0, 0);
                margin-right: 5px;
            }    
    </style>
</head>
<body>
    <main class="container">
        <h1>✅ 점심메뉴 추천 상세페이지</h1>

        <div class="actions">
            <button id="button-home" onclick="location.href='index.html'">메인</button>
            <button id="button-submit" onclick="location.href='register.html'">등록하기</button>
            <button id="button-list" onclick="location.href='list.html'">목록보기</button>
        </div>
        
        <div id="status" style="text-align: center; margin: 8px 0 16px; color: gray;">불러오는 중...</div>

        <table>
            <thead>
                <tr>
                    <th>항목</th>
                    <th>내용</th>
                </tr>
            </thead>
            <tbody id="detail-body">

            </tbody>
        </table>
    </main>

    <script>
  const API_BASE = 'https://68b7baee73b3ec66cec55e50.mockapi.io/lunch';
  /* DOM 요소들을 알아보기 쉽게 하기 위해 변수 앞에 $ 접두사를 붙여서 표현하는 관습*/
  const $status = document.getElementById('status');
  const $tbody  = document.getElementById('detail-body');

 // 기분에 따른 이모지
    function moodEmoji(mood) {
    const txt = (mood || '').trim();
    if (/행복|맛|좋|행복해|신남|설렘|최고|기쁨/.test(txt)) return '😋';
    if (/든든|배부|편안|여유|무난|보통|쏘쏘/.test(txt)) return '😌';
    if (/피곤|우울|스트레스|짜증|답답/.test(txt)) return '😮‍💨';
    return '🙂';
    }

// 맵기에 따른 배경색 변화
    function spicyBg(spicy) {
        const s = spicy || '';
        if (/싫어|살짝/.test(s)) return 'lightblue'; 
        if (/기본|조금/.test(s)) return 'lightyellow'; 
        if (/화끈한|아주/.test(s)) return 'red';
        return 'white'; 
    } 

  // 매우 심플한 흐름: recommend로 한 건 조회 → 렌더
  (async () => {
    $status.textContent = '불러오는 중…';

    // list.html에서 detail.html?id=<recommend>로 넘어온다고 가정
    const recommend = new URLSearchParams(location.search).get('id');

    // recommend로 조회 (검증/에러처리 없이 최소 흐름)
    const res = await fetch(`${API_BASE}?recommend=${encodeURIComponent(recommend)}`);
    const arr = await res.json();
    const m = arr[0] || {};

    // 배경색/이모지 적용
    document.body.style.background = spicyBg(m.spicy);
    const emoji  = moodEmoji(m.mood);
    const budget = m.budget != null ? Number(m.budget).toLocaleString('ko-KR') + '원' : '-';

    // 표 렌더, 감정에 따라 ${emoji}로 추가 출력
    $tbody.innerHTML = `
      <tr><td>메뉴 이름</td><td>${m.name ?? '(이름없음)'} </td></tr>
      <tr><td>예산</td><td>${budget}</td></tr>
      <tr><td>맵기</td><td>${m.spicy ?? '-'}</td></tr>
      <tr><td>종류</td><td>${m.category ?? '-'}</td></tr>
      <tr><td>기분</td><td>${m.mood ?? '-'} ${emoji}</td></tr>
    `;

    $status.textContent = '';
  })();
    </script>
</body>    
</html>