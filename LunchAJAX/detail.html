<!DOCTYPE html>
<html lang="ko">
    <meta charset="UTF-8">
<head>
    <title>ì ì‹¬ ë©”ë‰´ ì¶”ì²œ ìƒì„¸í˜ì´ì§€</title>

    <style>
            * { box-sizing: border-box; }
            body { font-family: 'Helvetica Neue', Arial, sans-serif; 
            margin: 0; background:#fafafa; color:#222; 
        }

            .container { max-width:900px; margin:40px auto; padding:24px; 
                background:#fff; border-radius:16px; 
                box-shadow:0 10px 24px rgba(0,0,0,.06); text-align: center;}

      
            /* í‘œ ìŠ¤íƒ€ì¼ */
            table { width:100%; border-collapse: collapse; table-layout: fixed; }
            thead th {
                background:#f5f6fa; border:1px solid #e5e7eb; padding:12px 10px;
                text-align:center; font-weight:600;
            }
            tbody td {
                border:1px solid #e5e7eb; padding:12px 10px; vertical-align: middle;
                text-align: center;
            }

            /* ì¹¼ëŸ¼ ì •ë ¬ */
            td.col-name   { text-align: left;  }
            td.col-budget { text-align: right; }
            td.col-center { text-align: center; }

            /* ì§€ê·¸ì¬ê·¸ ê°€ë…ì„± - í‘œ í…Œë§ˆì™€ ìœ ì‚¬í•œ ê¸°ëŠ¥ ëŒì–´ì˜´ */
            tbody tr:nth-child(odd)  { background:#fafbff; }
            tbody tr:nth-child(even) { background:#fff; }

            button { padding: 12px 18px; border:0; border-radius:10px; cursor:pointer; 
            align-items: center;}
            
            #button-submit {
                color: rgb(255, 255, 255);
                background-color: rgba(74, 61, 255, 0.98);
                margin-top: 10px;
                margin-right: 5px;
            }

            #button-list {
                color: rgb(255, 255, 255);
                background-color: rgba(0, 0, 0, 0.98);
                margin-top: 10px;
                margin-right: 5px;

            }
            #button-home {
                color: rgb(255, 255, 255);
                background-color: rgb(255, 0, 0);
                margin-right: 5px;
            }    
    </style>
</head>
<body>
    <main class="container">
        <h1>âœ… ì ì‹¬ë©”ë‰´ ì¶”ì²œ ìƒì„¸í˜ì´ì§€</h1>

        <div class="actions">
            <button id="button-home" onclick="location.href='index.html'">ë©”ì¸</button>
            <button id="button-submit" onclick="location.href='register.html'">ë“±ë¡í•˜ê¸°</button>
            <button id="button-list" onclick="location.href='list.html'">ëª©ë¡ë³´ê¸°</button>
        </div>
        
        <div id="status" style="text-align: center; margin: 8px 0 16px; color: gray;">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>

        <table>
            <thead>
                <tr>
                    <th>í•­ëª©</th>
                    <th>ë‚´ìš©</th>
                </tr>
            </thead>
            <tbody id="detail-body">

            </tbody>
        </table>
    </main>

    <script>
  const API_BASE = 'https://68b7baee73b3ec66cec55e50.mockapi.io/lunch';
  /* DOM ìš”ì†Œë“¤ì„ ì•Œì•„ë³´ê¸° ì‰½ê²Œ í•˜ê¸° ìœ„í•´ ë³€ìˆ˜ ì•ì— $ ì ‘ë‘ì‚¬ë¥¼ ë¶™ì—¬ì„œ í‘œí˜„í•˜ëŠ” ê´€ìŠµ*/
  const $status = document.getElementById('status');
  const $tbody  = document.getElementById('detail-body');

 // ê¸°ë¶„ì— ë”°ë¥¸ ì´ëª¨ì§€
    function moodEmoji(mood) {
    const txt = (mood || '').trim();
    if (/í–‰ë³µ|ë§›|ì¢‹|í–‰ë³µí•´|ì‹ ë‚¨|ì„¤ë ˜|ìµœê³ |ê¸°ì¨/.test(txt)) return 'ğŸ˜‹';
    if (/ë“ ë“ |ë°°ë¶€|í¸ì•ˆ|ì—¬ìœ |ë¬´ë‚œ|ë³´í†µ|ì˜ì˜/.test(txt)) return 'ğŸ˜Œ';
    if (/í”¼ê³¤|ìš°ìš¸|ìŠ¤íŠ¸ë ˆìŠ¤|ì§œì¦|ë‹µë‹µ/.test(txt)) return 'ğŸ˜®â€ğŸ’¨';
    return 'ğŸ™‚';
    }

// ë§µê¸°ì— ë”°ë¥¸ ë°°ê²½ìƒ‰ ë³€í™”
    function spicyBg(spicy) {
        const s = spicy || '';
        if (/ì‹«ì–´|ì‚´ì§/.test(s)) return 'lightblue'; 
        if (/ê¸°ë³¸|ì¡°ê¸ˆ/.test(s)) return 'lightyellow'; 
        if (/í™”ëˆí•œ|ì•„ì£¼/.test(s)) return 'red';
        return 'white'; 
    } 

  // ë§¤ìš° ì‹¬í”Œí•œ íë¦„: recommendë¡œ í•œ ê±´ ì¡°íšŒ â†’ ë Œë”
  (async () => {
    $status.textContent = 'ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦';

    // list.htmlì—ì„œ detail.html?id=<recommend>ë¡œ ë„˜ì–´ì˜¨ë‹¤ê³  ê°€ì •
    const recommend = new URLSearchParams(location.search).get('id');

    // recommendë¡œ ì¡°íšŒ (ê²€ì¦/ì—ëŸ¬ì²˜ë¦¬ ì—†ì´ ìµœì†Œ íë¦„)
    const res = await fetch(`${API_BASE}?recommend=${encodeURIComponent(recommend)}`);
    const arr = await res.json();
    const m = arr[0] || {};

    // ë°°ê²½ìƒ‰/ì´ëª¨ì§€ ì ìš©
    document.body.style.background = spicyBg(m.spicy);
    const emoji  = moodEmoji(m.mood);
    const budget = m.budget != null ? Number(m.budget).toLocaleString('ko-KR') + 'ì›' : '-';

    // í‘œ ë Œë”, ê°ì •ì— ë”°ë¼ ${emoji}ë¡œ ì¶”ê°€ ì¶œë ¥
    $tbody.innerHTML = `
      <tr><td>ë©”ë‰´ ì´ë¦„</td><td>${m.name ?? '(ì´ë¦„ì—†ìŒ)'} </td></tr>
      <tr><td>ì˜ˆì‚°</td><td>${budget}</td></tr>
      <tr><td>ë§µê¸°</td><td>${m.spicy ?? '-'}</td></tr>
      <tr><td>ì¢…ë¥˜</td><td>${m.category ?? '-'}</td></tr>
      <tr><td>ê¸°ë¶„</td><td>${m.mood ?? '-'} ${emoji}</td></tr>
    `;

    $status.textContent = '';
  })();
    </script>
</body>    
</html>