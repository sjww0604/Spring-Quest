<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <title>ì ì‹¬ ë©”ë‰´ ì¶”ì²œê¸°</title>

    <style>
    * { box-sizing: border-box; }
    body {
        font-family: 'Helvetica Neue', Arial, sans-serif;
        margin: 0;
        color: #222;
        background: #fafafa;
    }
    
    .container {
      max-width: 900px;
      margin: 40px auto;
      padding: 24px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.06);
    }

    .full { width: 100%;}    

    select.full, 
    input[type="text"].full {
        width: 100%;
        padding: 12px;
        border: 1px solid lightgray;
        border-radius: 10px;
    }

    input[type="range"].full {
        width: 100%;

    }
    output.below { display: block; margin-top: 8px; color: gray;}

    .radio-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .radio-item {
        display: flex;
        align-items: center;
        gap: 8px;
        cursor: pointer;
    }
    
    .actions { margin-top: 12px;}
    #submit-btn{
        display: block;
        margin-top: 20px;
        padding: 12px 18px;
        border: 0; border-radius: 10px;
        background-color: green;
        color: white;
    }


    </style>
</head>

    <body>
        <main class="container">
            <h1>ğŸ± ì ì‹¬ ë©”ë‰´ ì¶”ì²œê¸°</h1>
            <form id="lunch-form">
                <div class="field">
                <h3>ğŸŒ¶ï¸ ë§µê¸° ì •ë„</h3>
                <select id="spicy" name="spicy" class="full">
                    <option value="" disabled selected>===ë§µê¸°ë¥¼ ì„ íƒí•˜ì„¸ìš”===</option>
                    <option value="ë§¤ìš´ê±° ì‹«ì–´ìš”">ë§¤ìš´ê±° ì‹«ì–´ìš”</option>
                    <option value="ì‚´ì§ ë§¤ìš´ ë§›">ì‚´ì§ ë§¤ìš´ ë§›</option>
                    <option value="ê¸°ë³¸ ë§¤ìš´ ë§›">ê¸°ë³¸ ë§¤ìš´ ë§›</option>
                    <option value="ì¡°ê¸ˆ ë§¤ìš´ ë§›">ì¡°ê¸ˆ ë§¤ìš´ ë§›</option>
                    <option value="í™”ëˆí•œ ë§¤ìš´ ë§›">í™”ëˆí•œ ë§¤ìš´ ë§›</option>
                    <option value="ì•„ì£¼ ë§¤ìš´ ë§›">ì•„ì£¼ ë§¤ìš´ ë§›</option>
                </select>
                </div>

                <div class="field">
                    <h3>ğŸ’° ì˜ˆì‚°</h3>
                    <input type="range" id="budget" name="budget"
                    min="5000" max="20000" step="1000" value="5000" class="full">
                    <output id="budget-out">5,000ì›</output>
                </div>

            <div class="field">
                <h3>ğŸ— ìŒì‹ ì¢…ë¥˜</h3>
                <div class="radio-group" >
                    <label class="radio-item">
                    <input type="radio" id="korea" name="food-category" value="í•œì‹" required>
                        ğŸš í•œì‹</label>

                    <label class="radio-item">    
                    <input type="radio" id="japan" name="food-category" value="ì¼ì‹">
                        ğŸ™ ì¼ì‹</label>

                    <label class="radio-item">
                    <input type="radio" id="china" name="food-category" value="ì¤‘ì‹">
                        ğŸ¥Ÿ ì¤‘ì‹</label>            
                    <label class="radio-item">
                    <input type="radio" id="western" name="food-category" value="ì–‘ì‹">
                        ğŸ• ì–‘ì‹</label>
                </div>
            </div>        

            <div class="field">
                <h3>ğŸ™‚ ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì€?</h3>
                <input type="text" id="mood" placeholder="ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì„ ì…ë ¥í•˜ì„¸ìš”" class="full" >
            </div>

            <button type="submit" id="submit-btn">ì¶”ì²œë°›ê¸°</button>
            </form>
        </main>

    </body>

    <script>
        const budget = document.getElementById('budget');
        const budgetOut = document.getElementById('budget-out');
        const toKRW = v => Number(v).toLocaleString('ko-KR') + ' ì›';
        budget.addEventListener('input', () => budgetOut.value = toKRW(budget.value));
        
        const form = document.getElementById('lunch-form');

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            const spicy = document.getElementById('spicy').value;
            const budget = document.getElementById('budget').value;
            //ê¶ê¸ˆí•œ ì , formdataëŠ” ìŒì‹ ì¢…ë¥˜ì˜ ì…ë ¥ê°’ë§Œì„ ë°›ê¸°ìœ„í•´ì„œ ì‚¬ìš©í•œ ê°œë…ì¸ê°€?
            //ì•„ë‹ˆë©´ ì‹¤ì§ˆì ìœ¼ë¡œ jsì—ì„œ ê°’ì„ ë‘ë²ˆì”© ë¶ˆëŸ¬ì˜¤ê³  ìˆì§€ëŠ” ì•Šì€ê°€? 
            const data = new FormData(form);
            const category = data.get('food-category');
            const mood = document.getElementById('mood').value.trim();

            // ì…ë ¥ê°’ì´ ì •ìƒì ìœ¼ë¡œ ì…ë ¥ë˜ì§€ ì•Šì•˜ì„ ë•Œ ì¡°ê±´ë¬¸ì„ í†µí•œ ìœ íš¨ì„± ê²€ì‚¬ ì§„í–‰
            if (!category) { alert('ìŒì‹ ì¢…ë¥˜ë¥¼ ì„ íƒí•˜ì„¸ìš”.'); return;}
            if (!mood) { alert('ì˜¤ëŠ˜ì˜ ê¸°ë¶„ì„ ì…ë ¥í•˜ì„¸ìš”.'); return;}

            // ì…ë ¥ëœ ê°’ì„ ì½˜ì†”ì°½ìœ¼ë¡œ ê¸°ë¡ì‹œí‚¤ê³ , ì…ë ¥ëœ ìƒìˆ˜ê°’ì¸ ë§µê¸°,ì˜ˆì‚° ë“±ì˜ í˜•íƒœë¥¼ êµ¬í˜„
            console.log('ë§µê¸°: ', spicy);
            console.log('ì˜ˆì‚°: ', budget);
            console.log('ìŒì‹ ì¢…ë¥˜: ', category);
            console.log('ê¸°ë¶„: ', mood);

            alert('ì…ë ¥ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤! (ê°œë°œìë„êµ¬ ì½˜ì†”ì—ì„œ ê°’ì„ í™•ì¸í•˜ì„¸ìš”)');

            async function fetchLatestName() {
                const res = await fetch("https://6863bafe88359a373e960f61.mockapi.io/sparta/web/lunch");
                const list = await res.json();

            // ë°°ì—´ì˜ ë§ˆì§€ë§‰ ìš”ì†Œë¥¼ 'ê°€ì¥ ìµœê·¼'ì´ë¼ê³  ê°€ì •
            for (let i = list.length - 1; i >= 0; i--) {
                if (list[i].name) {
                    return list[i].name;
                }
            }

            // ëê¹Œì§€ ì—†ìœ¼ë©´
            return "(name ì—†ìŒ)";
            }

              try {
                const latestName = await fetchLatestName();
                alert(`ê°€ì¥ ìµœê·¼ ìƒì„±ëœ name: ${latestName}`);
  
            } catch (err) {
                console.error(err);
                alert("API í˜¸ì¶œ ì‹¤íŒ¨");
            }
        });
    </script>
</html>